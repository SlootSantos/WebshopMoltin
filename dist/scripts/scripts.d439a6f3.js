"use strict";angular.module("webshopMoltinApp",["webshopApp.moltin","ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main",resolve:{cart:["$q","MoltinAuth",function(a,b){var c=a.defer();return a.when(b).then(function(a){a.Cart.Contents(function(a){c.resolve(a)})}),c.promise}]}}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/store",{templateUrl:"views/store.html",controller:"StoreCtrl",controllerAs:"store",resolve:{categories:["$q","MoltinAuth",function(a,b){var c=a.defer();return a.when(b).then(function(a){a.Category.List(null,function(a){c.resolve(a)})}),c.promise}]}}).when("/category/:id",{templateUrl:"views/category.html",controller:"CategoryCtrl",controllerAs:"category",resolve:{category:["$q","$route","MoltinAuth",function(a,b,c){var d=a.defer();return a.when(c).then(function(a){a.Category.Get(b.current.params.id,function(a){d.resolve(a)})}),d.promise}],products:["$q","$route","MoltinAuth",function(a,b,c){var d=a.defer();return a.when(c).then(function(a){a.Product.List({category:b.current.params.id},function(a){d.resolve(a)})}),d.promise}]}}).when("/product/:id",{templateUrl:"views/product.html",controller:"ProductCtrl",controllerAs:"product",resolve:{product:["$q","$route","MoltinAuth",function(a,b,c){var d=a.defer();return a.when(c).then(function(a){a.Product.Get(b.current.params.id,function(a){d.resolve(a)})}),d.promise}],moltin:["$q","MoltinAuth",function(a,b){return b}],cart:["$q","MoltinAuth",function(a,b){var c=a.defer();return a.when(b).then(function(a){a.Cart.Contents(function(a){c.resolve(a)})}),c.promise}]}}).when("/cart",{templateUrl:"views/cart.html",controller:"CartCtrl",controllerAs:"cart",resolve:{moltin:["$q","MoltinAuth",function(a,b){return b}],cart:["$q","MoltinAuth",function(a,b){var c=a.defer();return b.then(function(a){a.Cart.Contents(function(a){c.resolve(a)})}),c.promise}]}}).when("/checkout",{templateUrl:"views/checkout.html",controller:"CheckoutCtrl",resolve:{cart:["$q","MoltinAuth",function(a,b){var c=a.defer();return b.then(function(a){a.Cart.Contents(function(a){c.resolve(a)})}),c.promise}],options:["$q","MoltinAuth",function(a,b){var c=a.defer();return b.then(function(a){a.Cart.Checkout(function(a){c.resolve(a)})}),c.promise}],fields:["$q","MoltinAuth",function(a,b){var c=a.defer();return b.then(function(a){a.Address.Fields(null,null,function(a){c.resolve(a)})}),c.promise}],moltin:["MoltinAuth",function(a){return a}]}}).when("/payment",{templateUrl:"views/payment.html",controller:"PaymentCtrl",resolve:{moltin:["$q","MoltinAuth",function(a,b){return b}]}}).when("/complete",{templateUrl:"views/complete.html",controller:"CompleteCtrl"}).when("/customize",{templateUrl:"views/customize.html",controller:"CustomizeCtrl",controllerAs:"customize"}).otherwise({redirectTo:"/"})}]).run(["MoltinAuth","$rootScope",function(a,b){a.then(function(a){a.Cart.Contents(function(a){b.cart=a,b.$apply()})})}]),angular.module("webshopApp.moltin",[]).factory("MoltinAuth",["$q",function(a){var b=a.defer(),c=new Moltin({publicId:"dwfun8ekseCvZ9hERZrxNOfdyjYhBTfRaiyXSNcM"});return c.Authenticate(function(){b.resolve(c)}),b.promise}]),angular.module("webshopMoltinApp").controller("MainCtrl",["$scope","cart",function(a,b){a.cartDisplay=b,console.log(b)}]),angular.module("webshopMoltinApp").controller("AboutCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("webshopMoltinApp").controller("StoreCtrl",["$scope","categories",function(a,b){a.categories=b,console.log(b)}]),angular.module("webshopMoltinApp").controller("CategoryCtrl",["$scope","category","products",function(a,b,c){a.cat=b,a.products=c}]),angular.module("webshopMoltinApp").controller("ProductCtrl",["$scope","$rootScope","product","cart","moltin","$timeout",function(a,b,c,d,e,f){a.prod=c,a.car=d,a.addStatus=null,a.addCart=function(){a.addStatus="Adding to cart...",e.Cart.Insert(c.id,1,null,function(c){a.addStatus="Success!",e.Cart.Contents(function(a){b.cart=a,b.$apply()}),a.$apply(),f(function(){a.addStatus=null},1e3)})}}]),angular.module("webshopMoltinApp").controller("CartCtrl",["$scope","$rootScope","cart","moltin",function(a,b,c,d){a.cartDisplay=c,console.log(c),console.log(c.total_items),console.log(c.totals.post_discount.formatted.with_tax),a["delete"]=function(){d.Cart.Delete(function(){d.Cart.Contents(function(c){b.cart=c,b.$apply(),a.cartDisplay=c,a.$apply(),console.log(c),console.log(a.cartDisplay.totals.post_discount.formatted.with_tax)})},function(){})}}]),angular.module("webshopMoltinApp").controller("CheckoutCtrl",["$scope","$rootScope","$location","moltin","cart","options","fields",function(a,b,c,d,e,f,g){a.data={bill:{},ship:{},ship_bill:0,notes:"",shipping:"",gateway:""},a.cartDisplay=e,a.options=f,a.fields=g,console.log(a.data.first_name),a.createOrder=function(){d.Cart.Complete({customer:{first_name:"der",last_name:"mn",email:"flosloot@gmx.de"},shipping:a.data.shipping,gateway:a.data.gateway,bill_to:a.data.bill,ship_to:a.data.ship_bill?"bill_to":a.data.ship},function(a){b.order=a,console.log(b.order),b.$apply(function(){c.path("/payment")})})}}]),angular.module("webshopMoltinApp").controller("PaymentCtrl",["$scope","$location","$rootScope","moltin",function(a,b,c,d){console.log(c.cart),a.payment=function(e){d.Checkout.Payment("purchase",a.order.id,{data:a.data},function(a){c.payment=a,d.Cart.Delete(function(){d.Cart.Contents(function(a){c.cart=a,c.$apply()})}),c.$apply(function(){b.path("/complete")})})}}]),angular.module("webshopMoltinApp").controller("CompleteCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("webshopMoltinApp").controller("CustomizeCtrl",function(){this.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}),angular.module("webshopMoltinApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>"),a.put("views/cart.html",'<h3>Your Cart:</h3> <table class="table table-striped table-responsive"> <thead> <tr> <th>Item</th> <th>Qty</th> <th>Price</th> </tr> </thead> <tbody> <tr ng-repeat="(id, product) in cartDisplay.contents"> <td>{{product.name}}</td> <td>{{product.quantity}}</td> <td>{{product.pricing.formatted.without_tax}}</td> </tr> </tbody> </table> <h4>Total Price: {{cartDisplay.totals.pre_discount.formatted.with_tax}}</h4> <a href="#/checkout" class="btn btn-success">Checkout!</a> <a ng-click="delete()" class="btn btn-danger">delete</a>'),a.put("views/category.html",'<h1>{{ cat.title }}</h1> <div class="container-fluid"> <div ng-repeat="prod in products" class="prod"> <a ng-href="#/product/{{prod.id}}"> <div class="pic" style="background:url({{ prod.images[0].url.http }}); background-size:cover"></div> <h3> <!-- seems to prevent the <a> in line 6 from applying link styles to all text --> {{ prod.title }} </h3> <p> {{ prod.description }} <br> <b>{{ prod.price.value }}</b> </p> </a> </div> </div>'),a.put("views/checkout.html",'<h1>Checkout</h1> <form class="form-horizontal" role="form" ng-submit="createOrder(data)"> <div class="row box"> <div class="col-md-6"> <h3>Billing Address</h3> <div class="billing-address"> <div class="form-group" ng-repeat="field in fields" ng-if="field.slug != \'customer\'"> <label class="col-md-4 control-label" for="bill_{{ field.slug }}">{{ field.name }}<span class="required" ng-if="field.required">*</span></label> <div class="col-md-8" ng-switch on="field.type"> <select name="bill_{{ field.slug }}" class="form-control" ng-options="k as v for (k, v) in field.available" ng-model="data.bill[field.slug]" ng-switch-when="country"></select> <input type="text" id="bill_{{ field.slug }}" ng-model="data.bill[field.slug]" class="form-control" placeholder="{{ field.name }}" ng-switch-default> </div> </div> </div> </div> <div class="col-md-6"> <div class="shiptobilling clearfix"> <h3>Shipping Address</h3> <label class="checkbox"> <input type="checkbox" value="1" ng-model="data.ship_bill" onclick="jQuery(\'.shipping-address\').toggle()">Ship to billing address? </label> </div> <div class="shipping-address" style="display: block"> <div class="form-group" ng-repeat="field in fields" ng-if="field.slug != \'customer\'"> <label class="col-md-4 control-label" for="ship_{{ field.slug }}">{{ field.name }} <span class="required" ng-if="field.required">*</span></label> <div class="col-md-8" ng-switch on="field.type"> <select name="ship_{{ field.slug }}" class="form-control" ng-options="k as v for (k, v) in field.available" ng-model="data.ship[field.slug]" ng-switch-when="country"></select> <input type="text" id="ship_{{ field.slug }}" ng-model="data.ship[field.slug]" class="form-control" placeholder="{{ field.name }}" ng-switch-default> </div> </div> </div> </div> </div> <div class="row"> <div class="col-md-12"> <div class="your_order"> <h3>Your Order</h3> <table class="table table-bordered table-responsive"> <thead> <tr> <th>Product</th> <th>Qty</th> <th>Totals</th> </tr> </thead> <tfoot> <tr class="subtotal"> <td></td> <td><b>Cart Subtotal</b></td> <td>{{ cartDisplay.totals.pre_discount.formatted.without_tax }}</td> </tr> <tr class="subtotal"> <td></td> <td><b>Order Total</b></td> <td>{{ cartDisplay.totals.pre_discount.formatted.with_tax }}</td> </tr> </tfoot> <tbody> <tr ng-repeat="(key,product) in cartDisplay.contents"> <td><a href="#/product/{{ product.id }}">{{ product.title }}</a></td> <td>{{ product.quantity }}</td> <td>{{ product.totals.formatted.with_tax }}</td> </tr> </tbody> </table> <div class="row" style="margin-bottom: 20px" ng-if="options.shipping.methods.length"> <h3>Shipping</h3> <div class="row box"> <div class="carrier" ng-repeat="carrier in options.shipping.methods"> <label class="radio"> <input type="radio" name="carrier" value="{{ carrier.slug }}" ng-model="data.shipping" checked> {{ carrier.name }} </label> <div class="carrier-{{ carrier.slug }}"> {{ carrier.description }} </div> </div> </div> </div> </div> </div> </div> <div class="row"> <div class="col-md-12"> <h3>Payment</h3> </div> <div class="col-md-4" ng-repeat="gateway in options.gateways"> <div class="box padding"> <label class="radio"> <input type="radio" name="gateway" value="{{ gateway.slug }}" ng-model="data.gateway" checked> Credit Card </label> </div> </div> </div> <button class="btn btn-primary pull-right" type="submit" style="margin: 20px 0">Proceed to Payment</button> </form>'),a.put("views/complete.html",'<div style="height:50vh; width:55vw; background:url(images/paris.1b19a985.jpg); background-size:cover; text-align:center"> <img src="images/tumblr2.d6f0f2af.png" alt="" height="400"> </div>'),a.put("views/customize.html",'<label for="color">Farbe</label> <input id="color" type="text" ng-model="try1"> <p style="color:{{try1}}"> hello </p> <!-- USE ANGULARS LOCAL STORAGE MODULE!!! --> <label for="name">Name</label> <input id="name" type="text" ng-model="try2"> <p style="color:"> {{try2}} </p>'),a.put("views/main.html",'<div class="jumbotron"> <img src="images/tumblr.5c82c158.png" alt="" height="250"> <h2>\'<b>{{ cartDisplay.totals.post_discount.formatted.with_tax }}</b></h2> <p class="lead"> Wanna build one yourself? </p> <p> <a class="btn btn-lg btn-success" ng-href="#/"> Build! </a> </p> </div> <div class="row marketing"> <h4>Nothing Special</h4> <p> Wanna Get something Special for your beloved ones? </p> </div>'),a.put("views/payment.html",'<div class="row"> <div class="col-md-12"> <h2>Payment</h2> </div> </div> <div class="row"> <div class="col-md-3"> <div class="loginbox"> <p>Billing Address</p> <ul> <li>{{ order.bill_to.data.first_name }} {{ order.bill_to.data.last_name }}</li> <li ng-if="order.bill_to.data.company">{{ order.bill_to.data.company }}</li> <li>{{ order.bill_to.data.address_1 }}</li> <li>{{ order.bill_to.data.address_2 }}</li> <li>{{ order.bill_to.data.county }}</li> <li>{{ order.bill_to.data.postcode }}</li> <li>{{ order.bill_to.data.country.value }}</li> </ul> </div> </div> <div class="col-md-3"> <div class="loginbox"> <p>Shipping Address</p> <ul> <li>{{ order.ship_to.data.first_name }} {{ order.ship_to.data.last_name }}</li> <li ng-if="order.ship_to.data.company">{{ order.ship_to.data.company }}</li> <li>{{ order.ship_to.data.address_1 }}</li> <li>{{ order.ship_to.data.address_2 }}</li> <li>{{ order.ship_to.data.county }}</li> <li>{{ order.ship_to.data.postcode }}</li> <li>{{ order.ship_to.data.country.value }}</li> </ul> </div> </div> <div class="col-md-6"> <form class="loginbox form-horizontal"> <p>Payment</p> <div class="form-group"> <label class="control-label col-md-4" for="card">Card Number <span class="required">*</span></label> <div class="col-md-8"> <input class="form-control" id="card" ng-model="data.number" type="text" card-format> </div> </div> <div class="form-group"> <label class="control-label col-md-4" for="expiry_month">Expiry Date <span class="required">*</span></label> <div class="col-md-4"> <input class="form-control" id="expiry_month" ng-model="data.expiry_month" type="text" placeholder="DD"> </div> <div class="col-md-4"> <input class="form-control" id="expiry_year" ng-model="data.expiry_year" type="text" placeholder="YYYY"> </div> </div> <div class="form-group"> <label class="control-label col-md-4" for="cv2">CV2 <span class="required">*</span></label> <div class="col-md-4"> <input class="form-control" id="cv2" ng-model="data.cvv" type="text"> </div> </div> <div class="form-group"> <div class="col-md-12"> <button class="btn btn-primary" type="button" ng-click="payment(data)">Pay</button> </div> </div> </form> </div> </div>'),a.put("views/product.html",'<div class="container-fluid"> <div class="cont"> <div class="prodpic"> <img src="{{ prod.images[0].url.http }}" alt=""> </div> <h1>{{ prod.title }}</h1> <p> {{ prod.description }} </p> <div class="buyncus"> <p> <b>{{ prod.price.value }}</b> </p> <p> <button class="btn btn-success" ng-if="!addStatus" ng-click="addCart()">Add</button> <button class="btn btn-warning" ng-if="addStatus">{{ addStatus }}</button> <button class="btn btn-success">Customize</button> </p> </div> </div> </div>'),a.put("views/store.html",'<h1>Categories</h1> <div class="row"> <div class="col-xs-6 col-sm-4 col-md-3" ng-repeat="cat in categories"> <a ng-href="#/category/{{cat.id}}"> <h3>{{ cat.title }}</h3> </a> <img src="images/yeoman.8cb970fb.png" alt="" height="100"> <p> {{ cat.description }} </p> </div> </div>')}]);